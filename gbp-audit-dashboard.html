<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GBP Audit Dashboard</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #1a1a2e; color: #eee; min-height: 100vh; }
        
        .header { background: #16213e; padding: 20px; border-bottom: 1px solid #0f3460; }
        .header h1 { color: #e94560; font-size: 24px; display: flex; align-items: center; gap: 10px; }
        .header .subtitle { color: #888; font-size: 14px; margin-top: 5px; }
        
        .search-bar { background: #0f3460; padding: 20px; display: flex; gap: 10px; flex-wrap: wrap; }
        .search-bar input { flex: 1; min-width: 250px; padding: 12px 16px; border: none; border-radius: 8px; font-size: 16px; background: #1a1a2e; color: #fff; }
        .search-bar button { padding: 12px 24px; background: #e94560; border: none; border-radius: 8px; color: #fff; font-weight: 600; cursor: pointer; transition: 0.2s; }
        .search-bar button:hover { background: #ff6b6b; }
        .search-bar button.secondary { background: #0f3460; border: 1px solid #e94560; }
        
        .tabs { display: flex; background: #16213e; border-bottom: 1px solid #0f3460; }
        .tab { padding: 15px 24px; cursor: pointer; color: #888; border-bottom: 3px solid transparent; transition: 0.2s; }
        .tab:hover { color: #fff; }
        .tab.active { color: #e94560; border-bottom-color: #e94560; }
        
        .content { padding: 20px; }
        
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-bottom: 30px; }
        .stat-card { background: #16213e; padding: 20px; border-radius: 12px; text-align: center; }
        .stat-card .value { font-size: 32px; font-weight: 700; color: #e94560; }
        .stat-card .label { color: #888; font-size: 14px; margin-top: 5px; }
        
        .charts-row { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px; }
        @media (max-width: 768px) { .charts-row { grid-template-columns: 1fr; } }
        
        .chart-card { background: #16213e; padding: 20px; border-radius: 12px; }
        .chart-card h3 { margin-bottom: 15px; color: #fff; font-size: 16px; }
        
        .results-table { background: #16213e; border-radius: 12px; overflow: hidden; }
        .results-table table { width: 100%; border-collapse: collapse; }
        .results-table th { background: #0f3460; padding: 12px 16px; text-align: left; color: #888; font-weight: 500; font-size: 13px; }
        .results-table td { padding: 12px 16px; border-bottom: 1px solid #0f3460; }
        .results-table tr:hover { background: #1a1a2e; }
        
        .rating { display: flex; align-items: center; gap: 6px; }
        .stars { color: #ffc107; }
        .review-count { color: #888; font-size: 13px; }
        
        .badge { display: inline-block; padding: 4px 10px; border-radius: 20px; font-size: 12px; margin-right: 5px; }
        .badge.primary { background: #e94560; }
        .badge.secondary { background: #0f3460; color: #aaa; }
        
        .action-btns { display: flex; gap: 8px; }
        .action-btn { padding: 6px 12px; border: none; border-radius: 6px; cursor: pointer; font-size: 12px; transition: 0.2s; }
        .action-btn.category { background: #e94560; color: #fff; }
        .action-btn.services { background: #0f3460; color: #fff; }
        .action-btn.reviews { background: #ffc107; color: #000; }
        
        .loading { text-align: center; padding: 40px; color: #888; }
        .empty-state { text-align: center; padding: 60px 20px; color: #888; }
        .empty-state h3 { color: #e94560; margin-bottom: 10px; }
        
        .bar-chart { display: flex; flex-direction: column; gap: 8px; }
        .bar-row { display: flex; align-items: center; gap: 10px; }
        .bar-label { width: 120px; font-size: 13px; color: #aaa; }
        .bar-track { flex: 1; height: 24px; background: #0f3460; border-radius: 4px; overflow: hidden; }
        .bar-fill { height: 100%; background: linear-gradient(90deg, #e94560, #ff6b6b); border-radius: 4px; transition: 0.5s; }
        .bar-value { width: 40px; text-align: right; font-size: 13px; color: #fff; }
        
        .category-tag { display: inline-block; padding: 3px 8px; background: #0f3460; border-radius: 4px; font-size: 12px; margin: 2px; }
    </style>
</head>
<body>
    <div class="header">
        <h1>üìç GBP Audit Dashboard</h1>
        <div class="subtitle">Local SEO Competitive Analysis Tool</div>
    </div>
    
    <div class="search-bar">
        <input type="text" id="searchQuery" placeholder="Search (e.g., 'plumber Austin TX', 'dentist Raleigh NC')" value="pain management san marcos tx">
        <button onclick="performScan()">üîç Scan Results</button>
        <button class="secondary" onclick="loadMockData()">üìä Load Demo Data</button>
    </div>
    
    <div class="tabs">
        <div class="tab active" data-tab="categories">Categories</div>
        <div class="tab" data-tab="services">Services</div>
        <div class="tab" data-tab="reviews">Reviews</div>
        <div class="tab" data-tab="location">Location</div>
        <div class="tab" data-tab="hours">Hours</div>
        <div class="tab" data-tab="attributes">Attributes</div>
    </div>
    
    <div class="content" id="mainContent">
        <div class="empty-state">
            <h3>Ready to Scan</h3>
            <p>Enter a search query and click "Scan Results" to analyze local competitors,<br>or click "Load Demo Data" to see how it works.</p>
        </div>
    </div>

    <script>
        // Mock data to demonstrate the tool
        const mockBusinesses = [
            { rank: 1, name: "Texas Pain Management Institute", category: "Pain management physician", categories: ["Pain management physician", "Medical clinic"], rating: 4.9, reviews: 454, address: "1340 Whitetail Way, San Marcos, TX 78666", phone: "(512) 555-0123", hours: "Open ‚ãÖ Closes 5PM", services: ["Pain management", "Physical therapy", "Chiropractic care", "Acupuncture"], website: "texaspainmgmt.com" },
            { rank: 2, name: "San Marcos Pain Center", category: "Pain management physician", categories: ["Pain: 4.8, reviews: 321, address management physician"], rating: "2208 Medical Pkwy, San Marcos, TX 78666", phone: "(512) 555-0456", hours: "Open ‚ãÖ Closes 6PM", services: ["Pain management", "Trigger point injections", "Medication management"], website: "sanmarcospain.com" },
            { rank: 3, name: "Advanced Pain Care", category: "Pain control clinic", categories: ["Pain control clinic", "Pain management physician"], rating: 4.7, reviews: 189, address: "5153 FM 1626, Kyle, TX 78640", phone: "(512) 555-0789", hours: "Open ‚ãÖ Closes 5:30PM", services: ["Pain management", "Interventional procedures", "Workers compensation"], website: "advpaincare.com" },
            { rank: 4, name: "Baylor Scott & White Pain Management", category: "Pain management physician", categories: ["Pain management physician", "Medical clinic"], rating: 4.6, reviews: 267, address: "1320 Wonder World Dr, San Marcos, TX 78666", phone: "(512) 555-0321", hours: "Open ‚ãÖ Closes 5PM", services: ["Pain management", "Rehabilitation", "Surgical consultations"], website: "bswhealth.org" },
            { rank: 5, name: "Central Texas Pain Relief", category: "Pain management physician", categories: ["Pain management physician"], rating: 5.0, reviews: 89, address: "401 Broadway St, San Marcos, TX 78666", phone: "(512) 555-0654", hours: "Open ‚ãÖ Closes 4PM", services: ["Pain management", "Massage therapy", "Holistic treatments"], website: "ctpainrelief.com" }
        ];

        let currentData = [];
        
        function loadMockData() {
            currentData = [...mockBusinesses];
            renderDashboard();
        }
        
        function performScan() {
            const query = document.getElementById('searchQuery').value;
            const content = document.getElementById('mainContent');
            content.innerHTML = '<div class="loading">üîç Scanning local results for "' + query + '"...</div>';
            
            // Simulate API call delay
            setTimeout(() => {
                loadMockData();
            }, 1500);
        }
        
        // Tab switching
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                if (currentData.length > 0) renderDashboard();
            });
        });
        
        function renderDashboard() {
            const activeTab = document.querySelector('.tab.active').dataset.tab;
            const content = document.getElementById('mainContent');
            
            if (activeTab === 'categories') renderCategories(content);
            else if (activeTab === 'services') renderServices(content);
            else if (activeTab === 'reviews') renderReviews(content);
            else if (activeTab === 'location') renderLocation(content);
            else if (activeTab === 'hours') renderHours(content);
            else if (activeTab === 'attributes') renderAttributes(content);
        }
        
        function renderCategories(content) {
            // Aggregate category data
            const allCats = {};
            const primaryCats = {};
            
            currentData.forEach(b => {
                b.categories.forEach(cat => {
                    allCats[cat] = (allCats[cat] || 0) + 1;
                });
                primaryCats[b.category] = (primaryCats[b.category] || 0) + 1;
            });
            
            const totalBusinesses = currentData.length;
            const uniqueCats = Object.keys(allCats).length;
            const uniquePrimary = Object.keys(primaryCats).length;
            const avgCats = (currentData.reduce((sum, b) => sum + b.categories.length, 0) / totalBusinesses).toFixed(1);
            const maxCats = Math.max(...currentData.map(b => b.categories.length));
            const minCats = Math.min(...currentData.map(b => b.categories.length));
            
            let html = `
                <div class="stats-grid">
                    <div class="stat-card"><div class="value">${totalBusinesses}</div><div class="label">Businesses</div></div>
                    <div class="stat-card"><div class="value">${uniqueCats}</div><div class="label">Unique Categories</div></div>
                    <div class="stat-card"><div class="value">${uniquePrimary}</div><div class="label">Primary Categories</div></div>
                    <div class="stat-card"><div class="value">${avgCats}</div><div class="label">Avg Categories</div></div>
                    <div class="stat-card"><div class="value">${maxCats}</div><div class="label">Max Categories</div></div>
                    <div class="stat-card"><div class="value">${minCats}</div><div class="label">Min Categories</div></div>
                </div>
                
                <div class="charts-row">
                    <div class="chart-card">
                        <h3>üìä All Categories Usage</h3>
                        <div class="bar-chart">
                            ${Object.entries(allCats).map(([cat, count]) => `
                                <div class="bar-row">
                                    <div class="bar-label">${cat.substring(0, 18)}</div>
                                    <div class="bar-track"><div class="bar-fill" style="width: ${(count/totalBusinesses)*100}%"></div></div>
                                    <div class="bar-value">${count}/${totalBusinesses}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    <div class="chart-card">
                        <h3>‚≠ê Primary Category Distribution</h3>
                        <div class="bar-chart">
                            ${Object.entries(primaryCats).map(([cat, count]) => `
                                <div class="bar-row">
                                    <div class="bar-label">${cat.substring(0, 18)}</div>
                                    <div class="bar-track"><div class="bar-fill" style="width: ${(count/totalBusinesses)*100}%"></div></div>
                                    <div class="bar-value">${count}/${totalBusinesses}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
                
                <div class="results-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Rank</th>
                                <th>Business</th>
                                <th>Categories</th>
                                <th>Rating</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${currentData.map(b => `
                                <tr>
                                    <td>#${b.rank}</td>
                                    <td><strong>${b.name}</strong></td>
                                    <td>${b.categories.map(c => `<span class="category-tag">${c}</span>`).join('')}</td>
                                    <td>
                                        <div class="rating">
                                            <span class="stars">‚òÖ</span> ${b.rating}
                                        </div>
                                    </td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
            `;
            
            content.innerHTML = html;
        }
        
        function renderServices(content) {
            const allServices = {};
            currentData.forEach(b => {
                b.services.forEach(s => {
                    allServices[s] = (allServices[s] || 0) + 1;
                });
            });
            
            const totalBusinesses = currentData.length;
            
            let html = `
                <div class="stats-grid">
                    <div class="stat-card"><div class="value">${totalBusinesses}</div><div class="label">Businesses</div></div>
                    <div class="stat-card"><div class="value">${Object.keys(allServices).length}</div><div class="label">Unique Services</div></div>
                    <div class="stat-card"><div class="value">${(Object.values(allServices).reduce((a,b) => a+b, 0) / totalBusinesses).toFixed(1)}</div><div class="label">Avg Services/Biz</div></div>
                </div>
                
                <div class="chart-card" style="margin-bottom: 20px;">
                    <h3>üîß Services Offered Across Competitors</h3>
                    <div class="bar-chart">
                        ${Object.entries(allServices).sort((a,b) => b[1] - a[1]).map(([service, count]) => `
                            <div class="bar-row">
                                <div class="bar-label">${service}</div>
                                <div class="bar-track"><div class="bar-fill" style="width: ${(count/totalBusinesses)*100}%"></div></div>
                                <div class="bar-value">${count}/${totalBusinesses}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="results-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Rank</th>
                                <th>Business</th>
                                <th>Services</th>
                                <th>Rating</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${currentData.map(b => `
                                <tr>
                                    <td>#${b.rank}</td>
                                    <td><strong>${b.name}</strong></td>
                                    <td>${b.services.map(s => `<span class="category-tag">${s}</span>`).join('')}</td>
                                    <td>‚òÖ ${b.rating}</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
            `;
            
            content.innerHTML = html;
        }
        
        function renderReviews(content) {
            const avgRating = (currentData.reduce((sum, b) => sum + b.rating, 0) / currentData.length).toFixed(1);
            const totalReviews = currentData.reduce((sum, b) => sum + b.reviews, 0);
            const avgReviews = Math.round(totalReviews / currentData.length);
            const topRated = currentData.sort((a,b) => b.rating - a.rating)[0];
            const mostReviewed = currentData.sort((a,b) => b.reviews - a.reviews)[0];
            
            let html = `
                <div class="stats-grid">
                    <div class="stat-card"><div class="value">${avgRating}</div><div class="label">Avg Rating</div></div>
                    <div class="stat-card"><div class="value">${totalReviews}</div><div class="label">Total Reviews</div></div>
                    <div class="stat-card"><div class="value">${avgReviews}</div><div class="label">Avg Reviews</div></div>
                    <div class="stat-card"><div class="value">‚òÖ ${topRated.rating}</div><div class="label">Highest Rated</div></div>
                </div>
                
                <div class="charts-row">
                    <div class="chart-card">
                        <h3>‚≠ê Rating Distribution</h3>
                        <div class="bar-chart">
                            ${[5,4.9,4.8,4.7,4.6,4.5].map(r => {
                                const count = currentData.filter(b => b.rating >= r && b.rating < r + 0.1).length;
                                return `
                                    <div class="bar-row">
                                        <div class="bar-label">${r}+ stars</div>
                                        <div class="bar-track"><div class="bar-fill" style="width: ${(count/currentData.length)*100}%"></div></div>
                                        <div class="bar-value">${count}</div>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    </div>
                    <div class="chart-card">
                        <h3>üìù Review Count by Business</h3>
                        <div class="bar-chart">
                            ${currentData.sort((a,b) => b.reviews - a.reviews).map(b => `
                                <div class="bar-row">
                                    <div class="bar-label">${b.name.substring(0, 15)}</div>
                                    <div class="bar-track"><div class="bar-fill" style="width: ${(b.reviews/500)*100}%"></div></div>
                                    <div class="bar-value">${b.reviews}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
                
                <div class="results-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Rank</th>
                                <th>Business</th>
                                <th>Rating</th>
                                <th>Reviews</th>
                                <th>Review Velocity</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${currentData.sort((a,b) => b.reviews - a.reviews).map(b => {
                                const velocity = Math.round(b.reviews / 12); // rough monthly estimate
                                return `
                                    <tr>
                                        <td>#${b.rank}</td>
                                        <td><strong>${b.name}</strong></td>
                                        <td><span class="stars">‚òÖ</span> ${b.rating}</td>
                                        <td>${b.reviews.toLocaleString()}</td>
                                        <td>~${velocity}/mo</td>
                                    </tr>
                                `;
                            }).join('')}
                        </tbody>
                    </table>
                </div>
            `;
            
            content.innerHTML = html;
        }
        
        function renderLocation(content) {
            let html = `
                <div class="stats-grid">
                    <div class="stat-card"><div class="value">${currentData.length}</div><div class="label">Businesses</div></div>
                    <div class="stat-card"><div class="value">${[...new Set(currentData.map(b => b.address.split(', ').pop()))].length}</div><div class="label">Cities</div></div>
                </div>
                
                <div class="results-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Rank</th>
                                <th>Business</th>
                                <th>Address</th>
                                <th>Phone</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${currentData.map(b => `
                                <tr>
                                    <td>#${b.rank}</td>
                                    <td><strong>${b.name}</strong></td>
                                    <td>${b.address}</td>
                                    <td>${b.phone}</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
            `;
            
            content.innerHTML = html;
        }
        
        function renderHours(content) {
            let html = `
                <div class="results-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Rank</th>
                                <th>Business</th>
                                <th>Hours Today</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${currentData.map(b => {
                                const isOpen = b.hours.includes('Open');
                                return `
                                    <tr>
                                        <td>#${b.rank}</td>
                                        <td><strong>${b.name}</strong></td>
                                        <td>${b.hours}</td>
                                        <td><span class="badge ${isOpen ? 'primary' : 'secondary'}">${isOpen ? 'Open Now' : 'Closed'}</span></td>
                                    </tr>
                                `;
                            }).join('')}
                        </tbody>
                    </table>
                </div>
            `;
            
            content.innerHTML = html;
        }
        
        function renderAttributes(content) {
            // Mock attributes
            const attributes = ['Wheelchair accessible', 'Accepts insurance', 'Online appointments', '24/7 availability', 'Emergency services'];
            
            let html = `
                <div class="chart-card" style="margin-bottom: 20px;">
                    <h3>üè∑Ô∏è Attribute Prevalence</h3>
                    <div class="bar-chart">
                        ${attributes.map(attr => {
                            const count = Math.floor(Math.random() * currentData.length); // Mock
                            return `
                                <div class="bar-row">
                                    <div class="bar-label">${attr}</div>
                                    <div class="bar-track"><div class="bar-fill" style="width: ${(count/currentData.length)*100}%"></div></div>
                                    <div class="bar-value">${count}/${currentData.length}</div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                </div>
                
                <div class="results-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Rank</th>
                                <th>Business</th>
                                <th>Website</th>
                                <th>Attributes</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${currentData.map(b => `
                                <tr>
                                    <td>#${b.rank}</td>
                                    <td><strong>${b.name}</strong></td>
                                    <td><a href="https://${b.website}" target="_blank" style="color: #e94560;">${b.website}</a></td>
                                    <td>${attributes.slice(0, 3).map(a => `<span class="category-tag">${a}</span>`).join('')}</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
            `;
            
            content.innerHTML = html;
        }
    </script>
</body>
</html>
